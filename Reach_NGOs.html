<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGO Members - FoodRescue Network</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- AOS Animation Library CSS CDN -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons (Updated Version) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Tailwind CSS Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-green': '#1E392A',
                        'brand-dark-green': '#14281D',
                        'brand-light-cream': '#F8F7F4',
                        'brand-accent-red': '#C70039',
                        'brand-accent-yellow': '#FFC300',
                        'brand-text': '#333333',
                    },
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F8F7F4; /* brand-light-cream */
        }
        .member-row {
            transition: background-color 0.3s ease;
        }
        .member-row:hover {
            background-color: #f9fafb; /* gray-50 */
        }
        .action-icon {
            transition: all 0.2s ease-in-out;
        }
        .action-icon:hover {
            color: #fff;
            background-color: #1E392A; /* brand-green */
            transform: scale(1.1);
        }
    </style>
</head>
<body class="text-brand-text">

    <!-- Header / Navbar (Consistent with other pages) -->
    <header class="bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50 transition-shadow duration-300" data-aos="fade-down">
        <nav class="container mx-auto px-4 lg:px-8 flex items-center justify-between h-20 transition-all duration-300">
            <a href="#" class="text-2xl font-bold text-brand-green flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg>
                <span>SurplusShare</span>
            </a>
            <ul class="hidden lg:flex items-center space-x-8 text-sm font-semibold text-gray-700">
                <li><a href="about.html" class="hover:text-brand-green">About Us</a></li>
                <li><a href="howitworks.html" class="hover:text-brand-green">How It Works</a></li>
                <li><a href="contact.html" class="hover:text-brand-green">Contact</a></li>
                <li><a href="Reach_NGOs.html" class="hover:text-brand-green">Reach NGOs</a></li>
                <li><a href="dashboard.html" class="hover:text-brand-green">Dashboard</a></li>
            </ul>
            <div class="flex items-center space-x-2">
                <a href="login.html" class="px-4 py-2 text-sm font-semibold text-brand-green rounded-full hover:bg-gray-100">Login</a>
                <a href="login.html" class="px-4 py-2 bg-brand-green text-white rounded-full text-sm font-semibold hover:bg-opacity-90 shadow-md hover:shadow-lg transition-shadow">Sign Up</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 lg:px-8 py-12">
        <div data-aos="fade-up">
            <h1 class="text-4xl font-extrabold text-brand-dark-green">Our NGO Partners</h1>
            <p class="mt-2 text-lg text-gray-600">Connecting with the organizations making a difference in our community.</p>
        </div>

        <!-- Member Listings -->
        <div class="mt-10 bg-white rounded-xl shadow-lg overflow-hidden" data-aos="fade-up">
            <div id="ngo-list" class="divide-y divide-gray-200">
                <div class="p-6 text-center text-sm text-gray-500">Loading NGOs...</div>
            </div>
        </div>
    </main>

    <!-- Footer (Consistent with other pages) -->
    <footer id="contact" class="bg-brand-dark-green text-white mt-16">
        <div class="container mx-auto px-4 lg:px-8 py-16">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-4">Food Rescue Network</h3>
                    <p class="text-white/70 text-sm">Reducing food waste and fighting hunger by connecting communities.</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-sm text-white/70">
                        <li><a href="index.html#about" class="hover:text-white">About Us</a></li>
                        <li><a href="index.html#how-it-works" class="hover:text-white">How It Works</a></li>
                        <li><a href="index.html#volunteer" class="hover:text-white">Volunteer</a></li>
                        <li><a href="#" class="hover:text-white">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Contact</h3>
                     <ul class="space-y-2 text-sm text-white/70">
                        <li><a href="mailto:contact@foodrescue.org" class="hover:text-white">contact@foodrescue.org</a></li>
                        <li><a href="tel:123-456-7890" class="hover:text-white">123-456-7890</a></li>
                        <li><p>123 Rescue Rd, Hungerfree, USA</p></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Stay Updated</h3>
                    <p class="text-sm text-white/70 mb-2">Join our newsletter for the latest updates.</p>
                    <form class="flex">
                        <input type="email" placeholder="Your email" class="w-full px-3 py-2 text-sm text-gray-800 rounded-l-md focus:outline-none">
                        <button class="bg-brand-accent-yellow text-brand-dark-green font-bold px-4 py-2 rounded-r-md shadow-md hover:shadow-lg transition-shadow">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-white/20 flex flex-col sm:flex-row justify-between items-center text-sm text-white/60">
                <p>&copy; 2025 Food Rescue Network. All Rights Reserved.</p>
                <div class="flex space-x-4 mt-4 sm:mt-0">
                    <a href="#" class="hover:text-white">Privacy Policy</a>
                    <a href="#" class="hover:text-white">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 50,
        });

        // --- NAVBAR SCROLL ---
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.querySelector('header');
            const nav = header.querySelector('nav');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('shadow-md');
                    nav.classList.remove('h-20');
                    nav.classList.add('h-16');
                } else {
                    header.classList.remove('shadow-md');
                    nav.classList.remove('h-16');
                    nav.classList.add('h-20');
                }
            });
        });
    </script>
    <script type="module">
        import { db } from './FirebaseConfig.js';
        import { collection, getDocs, query, where } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

        function createNgoRow({ displayName, contactName, email, address, phone, avatarUrl }) {
            const row = document.createElement('div');
            row.className = 'member-row flex flex-col sm:flex-row items-center gap-6 p-6';
            row.innerHTML = `
                <div class="flex-shrink-0">
                    <img src="${avatarUrl}" alt="${contactName}" class="w-20 h-20 rounded-full border-4 border-gray-100">
                </div>
                <div class="flex-grow text-center sm:text-left">
                    <h2 class="text-xl font-bold text-brand-dark-green">${displayName}</h2>
                    <p class="text-md text-gray-500">${contactName}</p>
                    <div class="mt-2 text-sm">
                        ${email ? `<a href="mailto:${email}" class="text-gray-600 hover:text-brand-green mr-4"><i class=\"fa-solid fa-envelope w-5 text-gray-400\"></i> ${email}</a>` : ''}
                        ${address ? `<span class="text-gray-600"><i class=\"fa-solid fa-location-dot w-5 text-gray-400\"></i> ${address}</span>` : ''}
                    </div>
                </div>
                <div class="flex-shrink-0 flex items-center gap-3">
                    ${phone ? `<a href="tel:${phone}" title="Call" class="action-icon w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center text-lg"><i class=\"fa-solid fa-phone\"></i></a>` : ''}
                </div>
            `;
            return row;
        }

        async function loadNgoList() {
            const list = document.getElementById('ngo-list');
            if (!list) return;
            list.innerHTML = '<div class="p-6 text-center text-sm text-gray-500">Loading NGOs...</div>';

            try {
                const q = query(collection(db, 'users'), where('role', '==', 'ngo'));
                const snap = await getDocs(q);
                const ngos = [];
                snap.forEach(docSnap => {
                    const data = docSnap.data() || {};
                    if ((data.verification_status || '').toLowerCase() === 'approved') {
                        const profile = data.ngo_profile || {};
                        ngos.push({
                            displayName: profile.ngoName || data.name || data.email || 'NGO',
                            contactName: profile.contactPerson ? `${profile.contactPerson} - Contact` : '',
                            email: data.email || '',
                            address: profile.address || '',
                            phone: profile.phoneNumber || '',
                            avatarUrl: `https://i.pravatar.cc/150?u=${encodeURIComponent(docSnap.id)}`
                        });
                    }
                });

                list.innerHTML = '';
                if (ngos.length === 0) {
                    list.innerHTML = '<div class="p-6 text-center text-sm text-gray-500">No approved NGOs found.</div>';
                    return;
                }

                ngos.forEach(ngo => list.appendChild(createNgoRow(ngo)));
            } catch (err) {
                console.error('Failed to load NGOs:', err);
                list.innerHTML = '<div class="p-6 text-center text-sm text-red-600">Failed to load NGOs. Please refresh.</div>';
            }
        }

        document.addEventListener('DOMContentLoaded', loadNgoList);
    </script>
</body>
</html>



